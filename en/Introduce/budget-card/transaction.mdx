---
title: 交易分类
---

## I. 交易类型总览

虚拟卡消费全周期包含以下五类卡交易类型：

Auth Request（消费授权）

Settlement（清算）

Reversal（撤销授权）

Refund（退款）

Declined Refund（拒付退款）


## II. Auth Request（消费授权）
流程描述：

C端用户消费，商户发起一笔授权请求，系统将判断是否允许该笔交易通过。
判断依据：
1.C端用户的卡片状态是否正常
2.C端用户的总资产是否足够支付费用
3.商户预算账户余额是否足够支付费用



## III. Settlement（清算）

**A. 正常结算流程（金额不变）**
随后系统将授权交易结算，状态由 pending 变为 completed。


**B. 清算金额变化（increase/decrease）**
若实际结算金额高于或低于授权金额，系统会生成新的交易记录：

新交易带 preTransactionId 字段，用于关联原授权订单。

## III. Reversal（撤销交易）
场景说明：

若授权后未完成结算（例如用户取消、授权超时等），可发起 Reversal 流程取消这笔交易。

系统生成关联授权 ID 的新撤销交易，类型为 reversal，状态为 completed。

此时商户会收到退款，退款将扣除部分手续费。

## IV. Refund（退款）
适用场景：

当订单已完成授权与结算后，用户取消购买或商户主动退款。

商户发起 Refund 请求后，系统生成新的退款交易，类型为 refund，与原交易不关联（preTransactionId=null）。

<Note>
Refund 事件在整体资金流已结算后发生。
</Note>

## V. Declined Refund（拒付退款）
发生条件：

系统同意交易授权，但发卡银行拒绝这比授权未完成该授权。

此时系统会自动生成一笔 declined_refund 类型交易，将用户资金和手续费退还。




